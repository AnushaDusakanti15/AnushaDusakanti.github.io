<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Welcome! - AIT580 FINAL PROJECT</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Welcome!</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">ANUSHA DUSAKANTI</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">WORK EXPERIENCE</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Redesign.html" rel="" target="">
 <span class="menu-text">STAT515 MID PROJECT</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./FinalReport.html" rel="" target="">
 <span class="menu-text">STAT515 FINAL PROJECT</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./aitpro.html" rel="" target="" aria-current="page">
 <span class="menu-text">AIT580 FINAL PROJECT</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">AIT580 FINAL PROJECT</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Early Model-based Provisional Estimates of Drug Overdose, Suicide, and Transportation-related Deaths</strong></p>
<p>AIT-580-009</p>
<p>Professor Dr.Harry Foxwell | George Mason University</p>
<p>Anusha Dusakanti</p>
<p>George Mason University</p>
<p>Fairfax, Virgina</p>
<p>adusakan@gmu.edu</p>
<p><strong>Abstract</strong></p>
<p>This project aims to understand the trends in drug overdose, suicide, and transportation-related deaths in the United States. The dataset, derived from death certificate data processed by the National Center for Health Statistics (NCHS), provides insights into mortality patterns for these causes of death. It is updated weekly as new data becomes available. These estimates, which are available by week&nbsp;and primary causes of death, give an early indicator of mortality trends and help in the identification of at-risk individuals and geographical locations. The dataset enables the analysis of intervention effectiveness and the identification of variables associated with effective policies for preventing these deaths. Using R, Python, and SQL for data transformations and visualizations, the research analyzes trends over time, examines the interaction of individual and environmental risk factors, and evaluates the impact of specific interventions on death rates.</p>
<p><strong>Introduction</strong></p>
<p>Unintentional drug overdoses, suicides, and transportation-related accidents are major public health concerns in the United States, contributing significantly to preventable mortality. Understanding the trends, risk factors, and potential impact of interventions for these causes of death is crucial for developing effective prevention strategies and saving lives.</p>
<p>This study utilized the CDC’s dataset of model-based provisional estimates of weekly drug overdose, suicide, and transportation-related deaths to explore several key research questions:</p>
<p>1.How have trends in these causes of death changed over time, and are there any seasonal patterns or long-term trends that can be identified?</p>
<p>2. How do individual-level risk factors (e.g., mental health disorders, previous substance abuse, history of suicide attempts) combine with environmental factors (e.g., access to lethal means, social support networks) to affect the likelihood of dying from drug overdoses, suicides, and transportation-related accidents?</p>
<p>3.Can the implementation of specific interventions or policies be associated with changes in mortality rates for these causes of death, and what characteristics of effective interventions can be identified from the data?</p>
<p>By addressing these questions, the study aims to provide insights that can inform the development and implementation of targeted, evidence-based strategies to reduce the burden of drug overdoses, suicides, and transportation-related deaths in the United States.</p>
<p><strong>Literature Review</strong></p>
<p>Motor vehicle accidents, drug overdoses, and suicides are major public health concerns, accounting for a significant percentage of mortality rates, particularly among young people. Understanding the effectiveness of programs and policies designed to reduce these fatalities is critical for developing successful public health measures.<br>
<br>
Karpf and Williams [2] did a thorough examination of several legislative measures aimed at teen drivers and motor vehicle mortality. Their findings highlight the importance of initiatives such as raising the minimum licensing age, enforcing night curfews, and conditioning licenses on seat belt use in reducing fatalities among young drivers.</p>
<p>They suggest that postponing license for 16- and 17-year-olds, who have disproportionately high collision rates, could result in older and more experienced drivers replacing them, thus lowering overall motor vehicle fatalities. Furthermore, the implementation of night curfews is cited as an important approach for reducing fatalities involving young drivers.</p>
<p>The article ‘Trends in Drug Overdose Deaths Among US Adolescents’[3] indicates that beginning in 2020, teens suffered a significant spike in overdose mortality, particularly fentanyl-related deaths. This increase contrasts with declining drug usage rates among teens across the country, indicating a higher danger from illegal fentanyls, which are highly strong and sometimes added to counterfeit pills resembling prescription opioids or other substances. The highest overdose death rates were reported among American Indian and Alaska Native teenagers, indicating larger racial and ethnic disparities in overdose mortality. However, Latinx adolescents had very high rates compared to Latinx adults, indicating the need for additional research and intervention initiatives to address these disparities. Furthermore, the influence of specific COVID-19 pandemic elements, such as mental illness and disruptions in illicit drug markets, could not be adequately determined.</p>
<p>The article by Phillips and Luth[4] provides evidence supporting Tarde’s perspective, demonstrating how cultural norms and ideas of masculinity can influence suicide mortality rates. For example, the “gender paradox” in suicide - where women attempt suicide more often but men die by suicide at higher rates - suggests that cultural views play a key role.&nbsp;The authors note that suicide may be perceived as a solution to aging-related problems, particularly among older white men, reflecting the influence of cultural beliefs on suicidal actions.</p>
<p>A recent report [5] by the National Center for Health Statistics&nbsp;examined early provisional estimates of drug overdose, suicide, and transportation-related deaths in the United States, utilizing nowcasting methods to account for reporting lags.&nbsp;</p>
<p>The analysis revealed several important trends:</p>
<p>Drug Overdose: Since early 2019, there has been an increase in predicted counts; this acceleration became evident in February 2020. It’s possible that things have become worse lately.</p>
<p>Suicide: There were strong seasonal trends, with mid-year numbers being higher and winter numbers being lower. Predicted counts in 2020 fell from March to June of that year, then slightly decreased from that point on, matching historical levels at first.<br>
<br>
Deaths related to transportation showed clear seasonal trends, peaking in the middle of the year and troughing in the winter, much like suicide rates. Forecast counts for 2020 first coincided with historical levels, then started to drop in March and April before rising in the following months.<br>
<br>
Trends unique to each jurisdiction were also looked at. All things considered, the research sheds light on the temporal trends of these mortality outcomes and points out possible variations in 2020 from prior years.</p>
<p><strong>Methodology</strong></p>
<p>To address the research questions, a multi-pronged analytical approach was employed utilizing a combination of R, Python, and SQL.</p>
<p>Data Acquisition and Transformation</p>
<p>The primary dataset [1] used in this study was provided by the Centers for Disease Control and Prevention. This dataset was accessed and downloaded from the HealthData.gov portal.</p>
<p>To prepare the data for analysis, various data transformation and cleaning tasks were performed using R programming language. This included handling missing values, converting data types, and restructuring the data into a format suitable for further analysis.</p>
<p>Data Exploration and Visualization</p>
<p>Exploratory data analysis was conducted using a combination of R and Python. Visualizations such as line charts, bar plots, and heatmaps were created to identify trends, patterns, and relationships within the data. These visualizations were useful in addressing the first research question regarding changes in mortality rates over time and the identification of seasonal patterns or long-term trends.</p>
<p>Targeted Analyses</p>
<p>To study the relationships between individual-level risk variables, environmental factors, and mortality rates, as well as the potential impact of initiatives and policies, SQL queries were used to extract relevant subsets of data. This included filtering the data based on geographic region, demographic factors, and time periods of interest.<br>
<br>
The gathered data was then examined using R and Python, with statistical techniques and modeling approaches tailored to the research goals. This enabled a more in-depth investigation of the detailed interplay of individual, environmental, and policy-level factors and their impact on observed mortality trends.</p>
<p>Cloud-based Data Storage and Analytics</p>
<p>To facilitate efficient data storage, processing, and visualization, the dataset was uploaded to an Amazon S3 (Simple Storage Service) bucket. AWS Glue DataBrew was then employed to perform data cleaning, transformation, and exploratory analysis, generating interactive visualizations and insights to support the research objectives.</p>
<p>This combination of tools and techniques are leveraged to conduct a comprehensive analysis of the trends, risk factors, and potential impact of interventions related to drug overdose, suicide, and transportation-related deaths in the United States.</p>
<p><strong>Results</strong></p>
<p>The data presented in Figure 1 shows the trends in drug overdose, suicide, and transportation-related deaths in the United States from 2016 to 2021. Several notable findings emerge from this data:</p>
<p>Drug Overdose Deaths</p>
<p>Drug overdose deaths were the highest among the three causes of death examined. The number of drug overdose deaths steadily increased over the time period, reaching a peak in 2020. This aligns with reports of a significant spike in overdose mortality, particularly involving fentanyl, during the COVID-19 pandemic period.</p>
<p>Suicide Deaths</p>
<p>Suicide deaths exhibited a different pattern, increasing from 2016 to 2018 before declining in the subsequent years. The data suggests that suicide mortality rates may have been impacted by the pandemic, with a drop observed in 2020.</p>
<p>Transportation-Related Deaths</p>
<p>Deaths related to transportation showed more variability over the 2016-2021 time frame. The data indicates that transportation-related fatalities were highest in 2020, potentially reflecting changes in travel patterns and behaviors during the pandemic, before declining again in 2021.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-608824139.png" class="img-fluid figure-img" width="400"></p>
<figcaption class="figure-caption">Fig 1</figcaption>
</figure>
</div>
<p>The line graphs in Figures 2 and 3 show the number of deaths due to different causes, over time in 2016 and 2021 respectively.</p>
<p>In both years, the data indicates that transportation-related deaths exhibited a clear seasonal pattern, with higher numbers observed during the August to November time period. The consistent seasonal pattern in transportation-related mortality across multiple years suggests that there are likely environmental, behavioral, or other factors that contribute to this cyclical trend.&nbsp;</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-2147341584.png" class="img-fluid figure-img" width="434"></p>
<figcaption class="figure-caption">Fig.2</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-169283716.png" class="img-fluid figure-img" width="430"></p>
<figcaption class="figure-caption">Fig.3</figcaption>
</figure>
</div>
<p>The data presented in Figure 4 shows the number of suicide deaths across different states in the year 2020. The results indicate that two states with particularly high suicide rates were California and Florida.</p>
<p>According to the information from the U.S. News &amp; World Report article [6], these two states also had the largest homeless populations in the country in 2022.&nbsp;The article suggests that the high rates of homelessness in these states may be contributing to their elevated suicide mortality.</p>
<p>In contrast, the data shows that Colorado and Massachusetts had relatively lower suicide rates compared to other states. This aligns with the information from the CDC webpage, which indicates that these states have implemented various policies and interventions aimed at addressing suicide disparities and preventing suicide.</p>
<p>The findings highlight the complex interplay between individual, environmental, and policy-level factors that can influence suicide mortality. The high suicide rates observed in states with large homeless populations, such as California [7]and Florida, underscore the need to address social determinants of health and provide comprehensive support services for vulnerable populations.</p>
<p>Conversely, the lower suicide rates in states like Colorado and Massachusetts suggest that targeted policy interventions and suicide prevention programs can be effective in reducing suicide deaths. These results emphasize the importance of a multifaceted approach to suicide prevention that addresses both individual risk factors and the broader social and environmental contexts.</p>
<p>The search results indicate that Texas has a high Black population, with over 3.5 million Black residents, making it the state with the second largest Black population in the country.&nbsp;Additionally, the data shows that the suicide rate among Black individuals has seen a significant increase in recent years, with a 53.8% spike since 2019.</p>
<p>This suggests that the high suicide rate in Texas may be partially attributable to its large Black population, who face disproportionate challenges and discrimination that can contribute to mental health issues and suicidal behaviors.</p>
<p>Furthermore, the search results indicate that states with larger Black populations, such as California, Florida, and Georgia, also tend to have higher overall suicide rates.&nbsp;This points to the role that systemic racism, social determinants of health, and lack of access to mental healthcare may play in driving disparities in suicide mortality.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-219913296.png" class="img-fluid figure-img" width="509"></p>
<figcaption class="figure-caption">Fig.4</figcaption>
</figure>
</div>
<p>The bar graph in Figure 5 shows the number of drug overdose-related deaths across different states in the United States. The data indicates that several states had particularly high rates of drug overdose mortality, including California, Florida, Ohio, Pennsylvania</p>
<p>These states with high drug overdose death rates align with the information from the U.S. News &amp; World Report article, which identified California and Florida as having the largest homeless populations in the country[6].&nbsp;The article suggests that the high rates of homelessness in these states may be contributing to elevated substance abuse and overdose mortality.</p>
<p>Additionally, the data on the Black population by state shows that Texas, California, Florida, and New York have some of the largest Black populations in the country[8].&nbsp;Research has shown that the Black community has been disproportionately impacted by the opioid epidemic and rising overdose rates.</p>
<p>In contrast, the data indicates that states like Iowa, Rhode Island, and Colorado had relatively lower rates of drug overdose deaths. These states may have implemented more effective prevention and harm reduction strategies or have different demographic and socioeconomic profiles that confer lower overdose risk.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-2129838754.png" class="img-fluid figure-img" width="501"></p>
<figcaption class="figure-caption">Fig.5</figcaption>
</figure>
</div>
<p>The bar graph in Figure 6 shows the number of transportation-related deaths in various states in the year 2020. The data indicates that some states had significantly lower rates of transportation-related fatalities compared to others.</p>
<p>Specifically, the states of Utah and Massachusetts had relatively lower numbers of transportation-related deaths.</p>
<p>The National Safety Council data[9] shows that in 2022, Massachusetts had the lowest motor vehicle fatality rate per 100 million miles traveled among all states.&nbsp;This suggests that Massachusetts has been effective in implementing policies and interventions to improve road safety and reduce transportation-related mortality.</p>
<p>Similarly, the Insurance Institute for Highway Safety (IIHS)[10] data indicates that Utah had one of the lower percentages of motor vehicle crash deaths occurring in single-vehicle crashes in 2021.&nbsp;Single-vehicle crashes are often associated with higher fatality rates, so Utah’s lower share of these types of crashes may contribute to its relatively lower transportation-related death toll.</p>
<p>These findings align with the data presented in Figure 6, which depicts Utah and Massachusetts as having fewer transportation-related deaths compared to other states. This highlights the importance of state-level policies, infrastructure, and safety programs in influencing transportation-related mortality outcomes across the country.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-3156415445.png" class="img-fluid figure-img" width="505"></p>
<figcaption class="figure-caption">Fig.6</figcaption>
</figure>
</div>
<p><strong>Limitations</strong></p>
<p>Despite the useful insights gained from the analysis, certain limitations must be acknowledged when interpreting the results. Furthermore, excluding data from specific geographic areas may induce biases into the research, especially when comparing death rates across demographic categories. Without extensive data coverage, it is difficult to determine the entire amount of racial, ethnic, and socioeconomic gaps in mortality outcomes, limiting the depth of insights into underlying systemic inequities.<br>
<br>
Firstly, the dataset used in this study includes missing values for specific geographic regions, such as Alaska and Hawaii. The lack of data&nbsp;may result in partial representations of mortality patterns, thus skewing the overall study and limiting the accuracy of visualizations. As a result, the conclusions drawn from the research may not adequately account for the variation of mortality patterns across all locations of interest, limiting the findings’ generalizability.</p>
<p><strong>Future Research</strong></p>
<p>Examining the Impact of Interventions and Policies: The dataset provides weekly estimates of mortality, which could be leveraged to assess the potential impact of specific interventions or policy changes implemented at the state or local level. Researchers could employ techniques like interrupted time series analysis to evaluate whether the introduction of new programs or policies was associated with changes in the observed mortality trends.</p>
<p>Investigating Racial and Ethnic Disparities: The search results indicate that certain racial and ethnic groups, such as American Indian/Alaska Native and Black populations, may be disproportionately affected by these causes of death. Further research could delve deeper into the underlying drivers of these disparities, exploring the role of social determinants of health, access to care, and systemic biases.</p>
<p>Analyzing Spatial and Temporal Patterns: The dataset provides information at the state level, which could be used to conduct spatial analyses to identify geographic hotspots or clusters of high mortality rates. Researchers could also investigate the seasonal patterns observed in the data, exploring potential environmental, behavioral, or other factors that may contribute to these cyclical trends.</p>
<p><strong>References</strong></p>
<p>[1] “Early Model-based Provisional Estimates of Drug Overdose, Suicide, and Transportation-related Deaths,”&nbsp;<em>Data.gov</em>, Mar.&nbsp;30, 2022. https://catalog.data.gov/dataset/early-model-based-provisional-estimates-of-drug-overdose-suicide-and-transportation-relate-b35b2 (accessed Mar.&nbsp;04, 2024).</p>
<p>[2] R. S. Karpf and A. F. Williams, “Teenage drivers and motor vehicle deaths,” Accident Analysis &amp; Prevention, vol.&nbsp;15, no. 1. Elsevier BV, pp.&nbsp;55–63, Feb.&nbsp;1983. doi: 10.1016/0001-4575(83)90007-6.</p>
<p>[3] J. Friedman, M. Godvin, C. L. Shover, J. P. Gone, H. Hansen, and D. L. Schriger, “Trends in Drug Overdose Deaths Among US Adolescents, January 2010 to June 2021,” JAMA, vol.&nbsp;327, no. 14. American Medical Association (AMA), p.&nbsp;1398, Apr.&nbsp;12, 2022. doi: 10.1001/jama.2022.2847.</p>
<p>[4] J. A. Phillips and E. A. Luth, “Beliefs About Suicide Acceptability in the United States: How Do They Affect Suicide Mortality?,” The Journals of Gerontology: Series B. Oxford University Press (OUP), Jan.&nbsp;25, 2018. doi: 10.1093/geronb/gbx153.</p>
<p>[5] L. Rossen, “VSRR-11: Early Provisional Estimates of Drug Overdose, Suicide, and Transportation-related Deaths: Nowcasting Methods to Account for Reporting Lags,” National Center for Health Statistics, Feb.&nbsp;2021. doi: 10.15620/cdc:101132.</p>
<p>[6] J. Haines, “States With the Largest Homeless Populations,”&nbsp;<em>USNews</em>, Apr.&nbsp;06, 2023.&nbsp;<a href="https://www.usnews.com/news/best-states/articles/states-with-the-most-homeless-people" class="uri">https://www.usnews.com/news/best-states/articles/states-with-the-most-homeless-people</a></p>
<p>[7] M. Kendall, “It’s now significantly more deadly to be homeless. Why are so many people dying?,” <em>CalMatters</em>, Mar.&nbsp;01, 2024. [Online]. Available: <a href="https://calmatters.org/housing/homelessness/2024/02/homeless-mortality-report/" class="uri">https://calmatters.org/housing/homelessness/2024/02/homeless-mortality-report/</a></p>
<p>[8] Black Demographics, “Black population by state - BlackDemographics.com,” <em>BlackDemographics.com</em>, Feb.&nbsp;08, 2024. <a href="https://blackdemographics.com/population/black-state-population/" class="uri">https://blackdemographics.com/population/black-state-population/</a></p>
<p>[9] “Motor-Vehicle deaths by State - Injury facts,”&nbsp;<em>Injury Facts</em>, Apr.&nbsp;10, 2024.&nbsp;<a href="https://injuryfacts.nsc.org/state-data/motor-vehicle-deaths-by-state/" class="uri">https://injuryfacts.nsc.org/state-data/motor-vehicle-deaths-by-state/</a></p>
<p>[10] “Fatality Facts 2021: State by state,” <em>IIHS-HLDI Crash Testing and Highway Safety</em>. <a href="https://www.iihs.org/topics/fatality-statistics/detail/state-by-state" class="uri">https://www.iihs.org/topics/fatality-statistics/detail/state-by-state</a></p>
<p>‌</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>